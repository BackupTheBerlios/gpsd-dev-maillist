<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] Strange error estimates in marginal signal conditions
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Strange%20error%20estimates%20in%20marginal%20signal%20conditions&In-Reply-To=%3C200712141439.38424.mick.durkin%40saunalahti.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005852.html">
   <LINK REL="Next"  HREF="005849.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] Strange error estimates in marginal signal conditions</H1>
    <B>Mick Durkin</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Strange%20error%20estimates%20in%20marginal%20signal%20conditions&In-Reply-To=%3C200712141439.38424.mick.durkin%40saunalahti.fi%3E"
       TITLE="[Gpsd-dev] Strange error estimates in marginal signal conditions">mick.durkin at saunalahti.fi
       </A><BR>
    <I>Fri Dec 14 13:39:38 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="005852.html">[Gpsd-dev] Garmin and SVN
</A></li>
        <LI>Next message: <A HREF="005849.html">[Gpsd-dev] Strange error estimates in marginal signal conditions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5847">[ date ]</a>
              <a href="thread.html#5847">[ thread ]</a>
              <a href="subject.html#5847">[ subject ]</a>
              <a href="author.html#5847">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Eric/Chris,

I have been using the new and improved xgps and noticed that I was getting 
some seriously bad eph figures when I have a poor 3-satellite fix.

I got eph values of many millions of metres, which I thought was caused by an 
error in the program.

I set up lots of printing in gpsutils matrix handling and figured out what is 
happening.

The values supplied by the gps board are similar to the sample below:-

Satellite picture:
az: 263 el: 56  SV: 16
az: 284 el: 19  SV: 3
az:  84 el:  3  SV: 26

The daemon calculates as follows:-

Line-of-sight matrix:
-0.555025 -0.068148  0.829038  1.000000
-0.917433  0.228742  0.325568  1.000000
 0.993159  0.104385  0.052336  1.000000

product:
 2.136100 -0.068360 -0.706845 -0.479298
-0.068360  0.067863  0.023436  0.264978
-0.706845  0.023436  0.796037  1.206942
-0.479298  0.264978  1.206942  3.000000

4x4 determinant:
 6.090167e-18

inverse: (rows wrap due to length)
3392057854644309.000000 25038613567005972.000000    
12323307551371232.000000 -6627465611592320.000000

25038613567005972.000000 184823548483843776.000000 
90964997906412880.000000 -48920908041140040.000000

12323307551371234.000000 90964997906412880.000000 
44770435975245984.000000 -24077507082010832.000000

-6627465611592320.000000 -48920908041140048.000000 -24077507082010832.000000 
12948865354021078.000000

hdop = 29132117.592740, uere = 8.000000, eph = 233056940.741916

I verified the above results externally with a spreadsheet which handles the 
matrices two ways:-

1) using the spreadsheet's inbuilt matrix functions (transpose and mmult).
2) using the cell-by-cell calculation method that the daemon code uses.

I wrote this spreadsheet ages ago when I wanted to understood how the maths 
was done in the daemon and the &quot;calculated&quot; results have always agreed with 
the spreadsheet's own matrix functions and the daemon's output. The tests 
then were done with data gathered in &quot;good&quot; fix conditions.

However, these latest figures show a difference between the three methods; the 
spreadsheet calculated results, the spreadsheet matrix functions and the 
daemon output.

I believe this is because the 4x4 determinant is so small; the spreadsheet's 
matrix functions claim it is 2.473e-17 and the daemon claims 6.090167e-18. 
The &quot;calculated&quot; method returns exactly zero.

The results from the daemon and the spreadsheet matrix functions are &quot;close&quot; 
in a relative way in that both give huge numbers of the same sign in the 
inverse matrix but the spreadsheet &quot;calculated&quot; method fails of course 
because of a divide-by-zero operation.

Whatever the reason, the end figures generated by the daemon and the 
spreadsheet's matrix functions are huge, which results in massive values for 
the DOPs. As seen above, the HDOP is 29 million, so the eph is 233,000 
kilometres!

I know we try to not to modify or cheat in our results, but this is excessive. 
Would it not be reasonable to limit our eph/epv values to some realistic 
maximum, perhaps a kilometre or so, and then suppress output in more extreme 
cases? I'm pretty sure anyway that at all times my position can't be more 
than a few tens of thousand of km from what the gps claims, so long as I am 
still on the earth's surface!

If this is a reasonable idea, I will work up a simple fix.


BR

Mick Durkin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005852.html">[Gpsd-dev] Garmin and SVN
</A></li>
	<LI>Next message: <A HREF="005849.html">[Gpsd-dev] Strange error estimates in marginal signal conditions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5847">[ date ]</a>
              <a href="thread.html#5847">[ thread ]</a>
              <a href="subject.html#5847">[ subject ]</a>
              <a href="author.html#5847">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
