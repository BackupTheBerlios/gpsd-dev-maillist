<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] endless loop, 100% cpu
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2005-May/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20endless%20loop%2C%20100%25%20cpu&In-Reply-To=%3C16929.213.84.187.156.1115752896.squirrel%40213.84.187.156%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001615.html">
   <LINK REL="Next"  HREF="001618.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] endless loop, 100% cpu</H1>
    <B>Rob Janssen</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20endless%20loop%2C%20100%25%20cpu&In-Reply-To=%3C16929.213.84.187.156.1115752896.squirrel%40213.84.187.156%3E"
       TITLE="[Gpsd-dev] endless loop, 100% cpu">gpsd at xs4all.nl
       </A><BR>
    <I>Tue May 10 21:21:36 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001615.html">[Gpsd-dev] endless loop, 100% cpu
</A></li>
        <LI>Next message: <A HREF="001618.html">[Gpsd-dev] endless loop, 100% cpu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1617">[ date ]</a>
              <a href="thread.html#1617">[ thread ]</a>
              <a href="subject.html#1617">[ subject ]</a>
              <a href="author.html#1617">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Rob Janssen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gpsd at xs4all.nl</A>&gt;:
</I>&gt;&gt;<i> Zodiac packets because they contain a &quot;length&quot; field for the remaining
</I>&gt;&gt;<i> data.
</I>&gt;&gt;<i> That means that a misrecognized packet header could lead to read-ahead
</I>&gt;&gt;<i> of
</I>&gt;&gt;<i> a lot of data.
</I>&gt;<i>
</I>&gt;<i> I anticipated this problem.  That's why the packet-getter code treats
</I>&gt;<i> lengths longer than the maximum packet length as an error.
</I>
Yes, this certainly limits the damage.  Well, now that the checksum is
verified it should be even better.

The limit for the check is not completely safe, because the outbuffer is
only one larger than MAX_PACKET_LENGTH and the length does not include the
header.  So in theory a message could be received that overflows the
buffer by a few bytes.  In fact I made that slightly worse with my
changes.
May be better to check maximum length relative to MAX_PACKET_LENGTH-16.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001615.html">[Gpsd-dev] endless loop, 100% cpu
</A></li>
	<LI>Next message: <A HREF="001618.html">[Gpsd-dev] endless loop, 100% cpu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1617">[ date ]</a>
              <a href="thread.html#1617">[ thread ]</a>
              <a href="subject.html#1617">[ subject ]</a>
              <a href="author.html#1617">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
