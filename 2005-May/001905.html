<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] Recent SVN
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2005-May/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Recent%20SVN&In-Reply-To=%3CPine.LNX.4.63.0505241133220.16807%40catbert.rellim.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001902.html">
   <LINK REL="Next"  HREF="001901.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] Recent SVN</H1>
    <B>Gary E. Miller</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Recent%20SVN&In-Reply-To=%3CPine.LNX.4.63.0505241133220.16807%40catbert.rellim.com%3E"
       TITLE="[Gpsd-dev] Recent SVN">gem at rellim.com
       </A><BR>
    <I>Tue May 24 20:37:46 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001902.html">[Gpsd-dev] Recent SVN
</A></li>
        <LI>Next message: <A HREF="001901.html">[Gpsd-dev] garmin_usb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1905">[ date ]</a>
              <a href="thread.html#1905">[ thread ]</a>
              <a href="subject.html#1905">[ subject ]</a>
              <a href="author.html#1905">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Yo Eric!

On Tue, 24 May 2005, Eric S. Raymond wrote:

&gt;<i> Gary E. Miller &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gem at rellim.com</A>&gt;:
</I>&gt;<i> &gt; Something in the recent SVN has trashed the Garmin_usb code.  The init
</I>&gt;<i> &gt; sequence starts OK, but fails before fully finishing.  The garmin kernel
</I>&gt;<i> &gt; driver traeats the /dev/USBx as a packet source instead of a serial
</I>&gt;<i> &gt; stream so it does not act how you normally expect on a serial line to
</I>&gt;<i> &gt; act.  Consider the current SVN FUBAR until I get a chance to fix this.
</I>&gt;<i>
</I>&gt;<i> Hm.  I was half-expecting this.  It will be a result of the change I
</I>&gt;<i> made this morning to pull packet-sniffing into the main select loop.  Sorry,
</I>&gt;<i> but Rob Janssen was correct that it was necessary, and without a Garmin
</I>&gt;<i> here I couldn't test your case.
</I>
Before you do any packet sniffing, I gotta finish the garmin_init()!  We
split the garmin_init() in to garmin_probe() and garmin_init() to give you
a bit more control.  Do I need to put them both back together again?

&gt;<i> The thing to watch when you go in with gdb is the value of the
</I>&gt;<i> device's driver-type pointer.  gpsd only does packet-sniffing when that
</I>&gt;<i> is NULL.
</I>
Not sure that I need to dig in to gdb.  Sounds like you know the path
you changed.  Can you just give me some more clues how you changed the
loop so we can get the garmin_init() back in the right place?

&gt;<i> &gt; Looks like I also have to redo the debug dumping.  Before the debug
</I>&gt;<i> &gt; was dumped by the garmin code a partial line at a time.  Now with a
</I>&gt;<i> &gt; \n being always added the debugging is all spread out.
</I>&gt;<i>
</I>&gt;<i> Alas, Rob was also correct to point out that trying to assemble reports
</I>&gt;<i> that way didn't really work.
</I>
Well, it was working for me.  I'll adapt to the new order.

&gt;<i> Reality bites...
</I>
So can team programming. :-)

RGDS
GARY
- ---------------------------------------------------------------------------
Gary E. Miller Rellim 20340 Empire Blvd, Suite E-3, Bend, OR 97701
	<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gem at rellim.com</A>  Tel:+1(541)382-8588 Fax: +1(541)382-8676
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQFCk3SA8KZibdeR3qURAqUaAKDzPf8Wy1SPGreZ/vAsvrGzx9thTgCgz2+1
hqPZutZDHrliZ+9HFryfj3g=
=rp3I
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001902.html">[Gpsd-dev] Recent SVN
</A></li>
	<LI>Next message: <A HREF="001901.html">[Gpsd-dev] garmin_usb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1905">[ date ]</a>
              <a href="thread.html#1905">[ thread ]</a>
              <a href="subject.html#1905">[ subject ]</a>
              <a href="author.html#1905">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
