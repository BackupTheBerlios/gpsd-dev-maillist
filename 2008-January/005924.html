<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] mkgmtime broken - date and time breaks down
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20mkgmtime%20broken%20-%20date%20and%20time%20breaks%20down&In-Reply-To=%3C20080101141011.GA15701%40thyrsus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005922.html">
   <LINK REL="Next"  HREF="005934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] mkgmtime broken - date and time breaks down</H1>
    <B>Eric S. Raymond</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20mkgmtime%20broken%20-%20date%20and%20time%20breaks%20down&In-Reply-To=%3C20080101141011.GA15701%40thyrsus.com%3E"
       TITLE="[Gpsd-dev] mkgmtime broken - date and time breaks down">esr at thyrsus.com
       </A><BR>
    <I>Tue Jan  1 15:10:11 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="005922.html">[Gpsd-dev] mkgmtime broken - date and time breaks down
</A></li>
        <LI>Next message: <A HREF="005934.html">[Gpsd-dev] mkgmtime broken - date and time breaks down
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5924">[ date ]</a>
              <a href="thread.html#5924">[ thread ]</a>
              <a href="subject.html#5924">[ subject ]</a>
              <a href="author.html#5924">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Rob Janssen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gpsd at xs4all.nl</A>&gt;:
&gt;<i> Date and time handling in gpsd has broken down today.
</I>&gt;<i> gpsd says it is Jan 2, 2008 while in fact it is Jan 1st.
</I>&gt;<i> 
</I>&gt;<i> This turns out to be because of a broken function mkgmtime in gpsutils.c
</I>&gt;<i> This has very naive handling of leap days.  It adds an extra day to the
</I>&gt;<i> date because 2008 is a leap year, but nowhere do I see any consideration
</I>&gt;<i> for the months january and february where this leapday has not yet
</I>&gt;<i> happened.  So all dates in january and february are off by one.
</I>
Ouch.  This requires an immediare fix release.

Rob, I found code on the glibc man page for gmtime(3) that apppears to do 
the right thing and have committed it.  Please check that it works for you.

While awaiting your report, I will make other preparations for a release today.
-- 
		&lt;a href=&quot;<A HREF="http://www.catb.org/~esr/">http://www.catb.org/~esr/</A>&quot;&gt;Eric S. Raymond&lt;/a&gt;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005922.html">[Gpsd-dev] mkgmtime broken - date and time breaks down
</A></li>
	<LI>Next message: <A HREF="005934.html">[Gpsd-dev] mkgmtime broken - date and time breaks down
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5924">[ date ]</a>
              <a href="thread.html#5924">[ thread ]</a>
              <a href="subject.html#5924">[ subject ]</a>
              <a href="author.html#5924">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
