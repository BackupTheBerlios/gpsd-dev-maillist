<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] Loss of first packet
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2005-July/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Loss%20of%20first%20packet&In-Reply-To=%3C20050729100037.GA1473%40thyrsus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002605.html">
   <LINK REL="Next"  HREF="002586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] Loss of first packet</H1>
    <B>Eric S. Raymond</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Loss%20of%20first%20packet&In-Reply-To=%3C20050729100037.GA1473%40thyrsus.com%3E"
       TITLE="[Gpsd-dev] Loss of first packet">esr at thyrsus.com
       </A><BR>
    <I>Fri Jul 29 12:00:37 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002605.html">[Gpsd-dev] Loss of first packet
</A></li>
        <LI>Next message: <A HREF="002586.html">[Gpsd-dev] EverMore protocol secrets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2680">[ date ]</a>
              <a href="thread.html#2680">[ thread ]</a>
              <a href="subject.html#2680">[ subject ]</a>
              <a href="author.html#2680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Rob Janssen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gpsd at xs4all.nl</A>&gt;:
&gt;<i> &gt; Rob Janssen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gpsd at xs4all.nl</A>&gt;:
</I>&gt;<i> &gt;&gt; What is that call to the parser with type = -1?
</I>&gt;<i> &gt;&gt; Is that same packet later passed again with valid type?
</I>&gt;<i> &gt;&gt; If so, why is the call with type -1 ever made?
</I>&gt;<i> &gt;&gt; When we can get rid of these, the checks for it can also be removed.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can you send me a log that reliably induces such a call?
</I>&gt;<i> 
</I>&gt;<i> I sent that two days ago.  Just start gpsd with -D5.
</I>
I tried running at -D 6.  Look at this:

Script started on Fri 29 Jul 2005 05:45:31 AM EDT
]0;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">esr at snark</A>:/home/esr/svn/gpsd/trunk<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">root at snark</A>:/home/esr/svn/gpsd/trunk# gpsd -D 6 -n -N /dev/ttyUSB0
gpsd: launching (Version 2.28)
gpsd: listening on port 2947
gpsd: running with effective group ID 0
gpsd: running with effective user ID 0
gpsd: opening GPS data source at '/dev/ttyUSB0'
gpsd: garmin_gps not active.
gpsd: no probe matched...
gpsd: speed 57600, 8N1
gpsd: gpsd_activate: opened GPS (4)
gpsd: Read 65 chars to buffer offset 0 (total 65): 00a20015063233312e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 64 chars = a20015063233312e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 63 chars = 0015063233312e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 62 chars = 15063233312e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 61 chars = 063233312e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 60 chars = 3233312e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 59 chars = 33312e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 58 chars = 312e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 57 chars = 2e3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 56 chars = 3030302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 55 chars = 30302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 54 chars = 302e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 53 chars = 2e30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 52 chars = 30303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 51 chars = 303045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 50 chars = 3045532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 49 chars = 45532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: lock never achieved
gpsd: Character discarded, buffer 48 chars = 532d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: lock never achieved
gpsd: Character discarded, buffer 47 chars = 2d30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 46 chars = 30312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 45 chars = 312d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 44 chars = 2d33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 43 chars = 33390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 42 chars = 390003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 41 chars = 0003d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 40 chars = 03d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 39 chars = d7b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 38 chars = b0b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 37 chars = b3a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: word tag not correct, skipping
gpsd: Character discarded, buffer 36 chars = a0a200020b84008fb0b3a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: Packet type 1 accepted 10 = a0a200020b84008fb0b3
gpsd: Packet discard of 10, chars remaining is 26 = a0a2005b290000000001351bd7b0540000000000000000000000
gpsd: packet sniff finds type 1
gpsd: Selecting SiRF-II binary driver...
gpsd: Setting DGPS control to use SBAS...
gpsd: Writing SiRF control type 85: a0 a2 00 07 85 01 00 00 00 00 00 00 86 b0 b3
gpsd: Setting SBAS to auto/integrity mode...
gpsd: Writing SiRF control type aa: a0 a2 00 06 aa 00 01 00 00 00 00 ab b0 b3
gpsd: Probing for firmware version...
gpsd: Writing SiRF control type 84: a0 a2 00 02 84 00 00 84 b0 b3
gpsd: Setting mode...
gpsd: Writing SiRF control type 88: a0 a2 00 0e 88 00 00 00 00 00 00 00 00 00 00 00 00 01 00 89 b0 b3
gpsd: Raw SiRF packet type 0x0b length 2: 0b84
gpsd: ACK 0x0b: 84
]0;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">esr at snark</A>:/home/esr/svn/gpsd/trunk<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">root at snark</A>:/home/esr/svn/gpsd/trunk# 
Script done on Fri 29 Jul 2005 05:45:40 AM EDT

It looks to me like what was happening here is that the SiRF was sending the
tail of a valid packet, probably a type 04, when it was opened.  The
first valid packet, a0a200020b84008fb0b3, is in fact processed, as you can
see at the very bottom of the script.
-- 
		&lt;a href=&quot;<A HREF="http://www.catb.org/~esr/">http://www.catb.org/~esr/</A>&quot;&gt;Eric S. Raymond&lt;/a&gt;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002605.html">[Gpsd-dev] Loss of first packet
</A></li>
	<LI>Next message: <A HREF="002586.html">[Gpsd-dev] EverMore protocol secrets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2680">[ date ]</a>
              <a href="thread.html#2680">[ thread ]</a>
              <a href="subject.html#2680">[ subject ]</a>
              <a href="author.html#2680">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
