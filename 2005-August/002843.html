<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] bluetooth gps devices
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2005-August/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20bluetooth%20gps%20devices&In-Reply-To=%3C1123519160.20662.23.camel%40tiger%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002756.html">
   <LINK REL="Next"  HREF="002910.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] bluetooth gps devices</H1>
    <B>Kenneth Johansson</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20bluetooth%20gps%20devices&In-Reply-To=%3C1123519160.20662.23.camel%40tiger%3E"
       TITLE="[Gpsd-dev] bluetooth gps devices">ken at kenjo.org
       </A><BR>
    <I>Mon Aug  8 18:39:20 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002756.html">[Gpsd-dev] bluetooth gps devices
</A></li>
        <LI>Next message: <A HREF="002910.html">[Gpsd-dev] bluetooth gps devices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2843">[ date ]</a>
              <a href="thread.html#2843">[ thread ]</a>
              <a href="subject.html#2843">[ subject ]</a>
              <a href="author.html#2843">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2005-08-03 at 23:48 -0400, Eric S. Raymond wrote:
&gt;<i> Kenneth Johansson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">ken at kenjo.org</A>&gt;:
</I>&gt;<i> &gt; The problem is that if I turn the bluetooth device off then on gpsd
</I>&gt;<i> &gt; needs to be restarted to get any data. 
</I>&gt;<i> 
</I>&gt;<i> Don't do that, then.
</I>:<i>)
</I>Well bluetooth devices have a tendency to run on battery and they are
mobile so if the GPS device is moved out of range or the battery runs
out I have to restart the program. Also what happens if gpsd was run on
a pocketpc type device and the device was put to sleep?

&gt;<i> &gt; The problem is that when the bluetooth stack lose contact with the
</I>&gt;<i> &gt; device a read returns 0(end of file).  After this it looks like it is
</I>&gt;<i> &gt; necessary to reopen the device(serial port). 
</I>&gt;<i> 
</I>&gt;<i> This is an OS-level bug.  Correct behavior would be to return -1 with
</I>&gt;<i> errno set to something useful.  I'm not going to crock gpsd's
</I>&gt;<i> architecture to try to work around it.
</I>
I do not think it will help that much returning an error instead. The
key thing is that the bluetooth stack do not reconnect automatically. It
only reconnect to the slave device when the serial tty is opened and
gpsd do not as far as I could see try to open the device repeatedly. I
could be wrong about this I only did a few strace runs to see what
happened. 


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/gpsd-dev/attachments/20050808/54e243ac/attachment.pgp">https://lists.berlios.de/pipermail/gpsd-dev/attachments/20050808/54e243ac/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002756.html">[Gpsd-dev] bluetooth gps devices
</A></li>
	<LI>Next message: <A HREF="002910.html">[Gpsd-dev] bluetooth gps devices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2843">[ date ]</a>
              <a href="thread.html#2843">[ thread ]</a>
              <a href="subject.html#2843">[ subject ]</a>
              <a href="author.html#2843">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
