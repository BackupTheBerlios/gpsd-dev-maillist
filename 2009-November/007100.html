<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] recent PPS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20recent%20PPS&In-Reply-To=%3Calpine.LNX.1.10.0911180943290.27121%40catbert.rellim.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007099.html">
   <LINK REL="Next"  HREF="007106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] recent PPS</H1>
    <B>Gary E. Miller</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20recent%20PPS&In-Reply-To=%3Calpine.LNX.1.10.0911180943290.27121%40catbert.rellim.com%3E"
       TITLE="[Gpsd-dev] recent PPS">gem at rellim.com
       </A><BR>
    <I>Wed Nov 18 19:01:01 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="007099.html">[Gpsd-dev] recent PPS
</A></li>
        <LI>Next message: <A HREF="007106.html">[Gpsd-dev] recent PPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7100">[ date ]</a>
              <a href="thread.html#7100">[ thread ]</a>
              <a href="subject.html#7100">[ subject ]</a>
              <a href="author.html#7100">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Yo Miroslav!

On Wed, 18 Nov 2009, Miroslav Lichvar wrote:

&gt;<i> Intervals for pulse length checks are too narrow. Currently, they are
</I>&gt;<i> about 0.1-0.2 percent which works fine with ntpd, but it's not enough
</I>&gt;<i> for chrony which can slew up to 10 percent. I know you don't care much
</I>&gt;<i> about chrony, but please reconsider.
</I>
I can buy that 0.2% is maybe too tight (many would disagree) but 10%
seems pretty outrageous to me.  Maybe there is a compromise that about
a wider window during a pull-in time, but for long term time keeping the
tight checks have shown their value in filtering out noise.

Can you provide some links for me to look at about chrony and this 10%?
Hard for me to believe that anyone interested in good time keeping could
abide by that.

Would you consider wider checks for the first hour gpsd runs, or some
sort of adaptive window?

&gt;<i> Precision is calculated from offset. As H&#229;kan pointed out earlier,
</I>&gt;<i> current offset (which is again based on local time) doesn't indicate
</I>&gt;<i> how good is the PPS signal.
</I>
I can not agree with that, sure the number is a mish-mash, but it
has real value as a 'goodness' indicator.

&gt;<i> Before the local clock is synchronized,
</I>&gt;<i> the calculated precision exponent could be very high which could
</I>&gt;<i> prevent ntpd from selecting the source.
</I>
I have been looking at the ntpd code and it does not appear to use
the precision we provide for that purpose.  In fact it seems to
pretty much ignore the provided precision.

If the ntpd used the precision, and it does not, then a high value
with 10% windows would also be totally misleading.

&gt;<i> It's better to use a fixed
</I>&gt;<i> value instead, like in other ntpd refclock drivers.
</I>
Now that argument I can buy.  Looking at the other ntpd drivers I see
that they all just provide initial guesses.  Since the value seems
totally unused by ntpd the precedent of the other drivers seems
worth following.  So I keep the old 'precision' for logging purposes
and report -16 to ntpd in SVN r6535.  I hope it does something for
you with chrony buecause it is a no-op to ntpd.

RGDS
GARY
- ---------------------------------------------------------------------------
Gary E. Miller Rellim 109 NW Wilmington Ave., Suite E, Bend, OR 97701
	<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gem at rellim.com</A>  Tel:+1(541)382-8588

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (GNU/Linux)

iD8DBQFLBDZfBmnRqz71OvMRAoSMAJ9hdytshBzCBlX10DVs1TPA3RqRbgCgjTqt
Shp0JNoicrJslJ6aD/TZfhg=
=J3tE
-----END PGP SIGNATURE-----
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007099.html">[Gpsd-dev] recent PPS
</A></li>
	<LI>Next message: <A HREF="007106.html">[Gpsd-dev] recent PPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7100">[ date ]</a>
              <a href="thread.html#7100">[ thread ]</a>
              <a href="subject.html#7100">[ subject ]</a>
              <a href="author.html#7100">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
