<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] Architecture-independent recode of garmin.c
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2005-April/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Architecture-independent%20recode%20of%20garmin.c&In-Reply-To=%3C200504031843.34100.john%40jsjf.demon.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001221.html">
   <LINK REL="Next"  HREF="001224.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] Architecture-independent recode of garmin.c</H1>
    <B>John Foster</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Architecture-independent%20recode%20of%20garmin.c&In-Reply-To=%3C200504031843.34100.john%40jsjf.demon.co.uk%3E"
       TITLE="[Gpsd-dev] Architecture-independent recode of garmin.c">john at jsjf.demon.co.uk
       </A><BR>
    <I>Sun Apr  3 20:43:34 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001221.html">[Gpsd-dev] test
</A></li>
        <LI>Next message: <A HREF="001224.html">[Gpsd-dev] Architecture-independent recode of garmin.c
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1223">[ date ]</a>
              <a href="thread.html#1223">[ thread ]</a>
              <a href="subject.html#1223">[ subject ]</a>
              <a href="author.html#1223">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This seems more appropriate for the dev list. Hope that's OK.

As threatxxxxx promised, I've done a bit of work on garmin.c to see how it 
could be coded to cope with big-endian targets, and/or targets with data 
alignment restrictions (if there ever are any).

Although structs are the nice, readable way to deal with packet formats, they 
can't work for these targets, so I had to do it another way. My solution 
involves inline functions and the preprocessor, hiding the uglier parts in a 
separate header file.

Visit <A HREF="http://www.jsjf.demon.co.uk/garmin.html">http://www.jsjf.demon.co.uk/garmin.html</A> for the details and the code. (I 
wasn't sure about list ettiquette for attaching them.) The version of 
garmin.c is from the 2.20 distribution. I didn't change any other files.

As to whether you'll want to use it, that's another matter. You're free to, or 
you're also free just to treat it as a piece of speculative research.

It compiles without warnings on my Red Hat desktop box, which I find 
surprising since it does use casts when the architecture is little-endian and 
there are no alignment restrictions. I'll try it on the Zaurus under zgcc 
when I've finished reconstructing its file system. (No, don't ask...)

The header file is not specific to the Garmin code, so it could be used in 
other situations too.

Cheers

John Foster


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001221.html">[Gpsd-dev] test
</A></li>
	<LI>Next message: <A HREF="001224.html">[Gpsd-dev] Architecture-independent recode of garmin.c
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1223">[ date ]</a>
              <a href="thread.html#1223">[ thread ]</a>
              <a href="subject.html#1223">[ subject ]</a>
              <a href="author.html#1223">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
