<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] driver_aivdm
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2010-April/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20driver_aivdm&In-Reply-To=%3C201004291745.05656.contact_gpsd%40nirgal.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007717.html">
   <LINK REL="Next"  HREF="007719.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] driver_aivdm</H1>
    <B>Nirgal</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20driver_aivdm&In-Reply-To=%3C201004291745.05656.contact_gpsd%40nirgal.com%3E"
       TITLE="[Gpsd-dev] driver_aivdm">contact_gpsd at nirgal.com
       </A><BR>
    <I>Thu Apr 29 18:44:56 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007717.html">[Gpsd-dev] new gps report
</A></li>
        <LI>Next message: <A HREF="007719.html">[Gpsd-dev] [PATCH] Prevent a warning when compiling with	--disable-oldstyle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7718">[ date ]</a>
              <a href="thread.html#7718">[ thread ]</a>
              <a href="subject.html#7718">[ subject ]</a>
              <a href="author.html#7718">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a few additionnal comments regarding driver_aivdm:

* When a truncated packets is found, returned value should be false, shoudn't it?

* Use of ais_context is a bit sily. Values are usually erased when entering the function, including await and apart. I think the context should only contain the number of fragments successfully unpacked instead of await and part. fields[1] and fields[2] should be local variables. Decode only if message is complete (local_await==local_part &amp;&amp; local_part = context-&gt;completed_fragments+1).
At the present time, if the first packet we receive is the second of 2, we'll try to fill the ais data structure, that's stupid and dangerous.

What do you think? Does it make sense if I write a patch?

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007717.html">[Gpsd-dev] new gps report
</A></li>
	<LI>Next message: <A HREF="007719.html">[Gpsd-dev] [PATCH] Prevent a warning when compiling with	--disable-oldstyle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7718">[ date ]</a>
              <a href="thread.html#7718">[ thread ]</a>
              <a href="subject.html#7718">[ subject ]</a>
              <a href="author.html#7718">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
