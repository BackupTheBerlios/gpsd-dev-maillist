<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] [ntp:hackers]  ntpd shm changes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20%5Bntp%3Ahackers%5D%20%20ntpd%20shm%20changes&In-Reply-To=%3CAANLkTim9u2oKoauCU-gAa78LOYDv7aDKMSc5tBqyftpN%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008878.html">
   <LINK REL="Next"  HREF="008890.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] [ntp:hackers]  ntpd shm changes</H1>
    <B>Dave Hart</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20%5Bntp%3Ahackers%5D%20%20ntpd%20shm%20changes&In-Reply-To=%3CAANLkTim9u2oKoauCU-gAa78LOYDv7aDKMSc5tBqyftpN%40mail.gmail.com%3E"
       TITLE="[Gpsd-dev] [ntp:hackers]  ntpd shm changes">davehart_gmail_exchange_tee at davehart.net
       </A><BR>
    <I>Sat Mar 19 12:56:22 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="008878.html">[Gpsd-dev] Test time; release Monday
</A></li>
        <LI>Next message: <A HREF="008890.html">[Gpsd-dev] [ntp:hackers]  ntpd shm changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8889">[ date ]</a>
              <a href="thread.html#8889">[ thread ]</a>
              <a href="subject.html#8889">[ subject ]</a>
              <a href="author.html#8889">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Mar 19, 2011 at 11:20 UTC, Terje Mathisen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">terje at tmsw.no</A>&gt; wrote:
&gt;<i> The best you can do with a single producer and one/multiple readers (which
</I>&gt;<i> are allowed to read the same data), is probably to have multiple slots for
</I>&gt;<i> the data packets together with a single pointer to the current/last updated
</I>&gt;<i> slot.
</I>&gt;<i>
</I>&gt;<i> The pointer can even be a simple index, using a byte variable makes it
</I>&gt;<i> impossible for a reader to read a partially updated value.
</I>
That sounds like a good way to go to me.  Can you think of any reason
two slots would not be enough?  Also I'd feel better about the atomic
handling of th index with it manipulated as the native word size
(currently 32 or 64, could set aside 128 bits).  At least on some RISC
platforms, byte access is handled by the compiler as a native word
size plus extra instructions, killing atomicity I believe.

Thanks,
Dave Hart

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008878.html">[Gpsd-dev] Test time; release Monday
</A></li>
	<LI>Next message: <A HREF="008890.html">[Gpsd-dev] [ntp:hackers]  ntpd shm changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8889">[ date ]</a>
              <a href="thread.html#8889">[ thread ]</a>
              <a href="subject.html#8889">[ subject ]</a>
              <a href="author.html#8889">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
