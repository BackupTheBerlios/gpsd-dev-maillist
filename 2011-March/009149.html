<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] [ntp:hackers] Single-writer/many-reader consistency: Test program written &amp; verified
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20%5Bntp%3Ahackers%5D%20Single-writer/many-reader%20consistency%3A%0A%20Test%20program%20written%20%26%20verified&In-Reply-To=%3CAANLkTimJgSxeG07p%3DebcdLRdCeYHPgJN_a4gUs8fzOoo%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009148.html">
   <LINK REL="Next"  HREF="009155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] [ntp:hackers] Single-writer/many-reader consistency: Test program written &amp; verified</H1>
    <B>tz</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20%5Bntp%3Ahackers%5D%20Single-writer/many-reader%20consistency%3A%0A%20Test%20program%20written%20%26%20verified&In-Reply-To=%3CAANLkTimJgSxeG07p%3DebcdLRdCeYHPgJN_a4gUs8fzOoo%40mail.gmail.com%3E"
       TITLE="[Gpsd-dev] [ntp:hackers] Single-writer/many-reader consistency: Test program written &amp; verified">thomas at mich.com
       </A><BR>
    <I>Mon Mar 28 14:46:51 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="009148.html">[Gpsd-dev] [ntp:hackers] Single-writer/many-reader consistency: Test program written &amp; verified
</A></li>
        <LI>Next message: <A HREF="009155.html">[Gpsd-dev] [ntp:hackers] Single-writer/many-reader consistency: Test program written &amp; verified
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9149">[ date ]</a>
              <a href="thread.html#9149">[ thread ]</a>
              <a href="subject.html#9149">[ subject ]</a>
              <a href="author.html#9149">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Mar 28, 2011 at 8:21 AM, Terje Mathisen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">terje at tmsw.no</A>&gt; wrote:
&gt;<i> Terje Mathisen wrote:
</I>
&gt;<i> All threads done!
</I>&gt;<i> Thread 0 did 1020921970 iterations
</I>&gt;<i> Thread 1 did 1939160384 iterations
</I>&gt;<i> Thread 2 did 924938960 iterations
</I>&gt;<i> Thread 3 did 2002669713 iterations
</I>&gt;<i> counter_update = 1047208131, counter_retry = 365502934,
</I>&gt;<i> timestamps_inconsistent = 0
</I>&gt;<i>
</I>&gt;<i> I.e. 1e9 write operations, nearly 4e9 reads.
</I>&gt;<i>
</I>&gt;<i> Of the reads 1e9, i.e. about 25% happened in the middle of an update and one
</I>&gt;<i> third of these required a retry due to the counter variable getting close to
</I>&gt;<i> wrapping around.
</I>
Which architecture, Alpha is apparently the most intersesting one?

Also, would it be possible to try higher and higher update rates until
we detect inconsistency instead of saying 100Hz seems safe.

Others have been pointing out that different architectures guarantee
different things, so if the architecture you tested on guarantees no
(undetected) errors at 400% cpu even without a write barrier the test
is not of the algorithm.

I'd be curious how fast you could do things on an alpha without a
write barrier.  Or if you are going to use a write barrier for the
architectures, the code that implements it - the long #if ARCH chain.
Or will sync_synchronize() be enough?

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009148.html">[Gpsd-dev] [ntp:hackers] Single-writer/many-reader consistency: Test program written &amp; verified
</A></li>
	<LI>Next message: <A HREF="009155.html">[Gpsd-dev] [ntp:hackers] Single-writer/many-reader consistency: Test program written &amp; verified
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9149">[ date ]</a>
              <a href="thread.html#9149">[ thread ]</a>
              <a href="subject.html#9149">[ subject ]</a>
              <a href="author.html#9149">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
