<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] [ntp:hackers]  ntpd shm changes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20%5Bntp%3Ahackers%5D%20%20ntpd%20shm%20changes&In-Reply-To=%3Crmi1v22j9rc.fsf%40fnord.ir.bbn.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008890.html">
   <LINK REL="Next"  HREF="008902.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] [ntp:hackers]  ntpd shm changes</H1>
    <B>Greg Troxel</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20%5Bntp%3Ahackers%5D%20%20ntpd%20shm%20changes&In-Reply-To=%3Crmi1v22j9rc.fsf%40fnord.ir.bbn.com%3E"
       TITLE="[Gpsd-dev] [ntp:hackers]  ntpd shm changes">gdt at ir.bbn.com
       </A><BR>
    <I>Sun Mar 20 12:45:27 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="008890.html">[Gpsd-dev] [ntp:hackers]  ntpd shm changes
</A></li>
        <LI>Next message: <A HREF="008902.html">[Gpsd-dev] [ntp:hackers] ntpd shm changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8901">[ date ]</a>
              <a href="thread.html#8901">[ thread ]</a>
              <a href="subject.html#8901">[ subject ]</a>
              <a href="author.html#8901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Dave Hart &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">davehart_gmail_exchange_tee at davehart.net</A>&gt; writes:

&gt;<i> On Sat, Mar 19, 2011 at 11:20 UTC, Terje Mathisen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">terje at tmsw.no</A>&gt; wrote:
</I>&gt;&gt;<i> The best you can do with a single producer and one/multiple readers (which
</I>&gt;&gt;<i> are allowed to read the same data), is probably to have multiple slots for
</I>&gt;&gt;<i> the data packets together with a single pointer to the current/last updated
</I>&gt;&gt;<i> slot.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The pointer can even be a simple index, using a byte variable makes it
</I>&gt;&gt;<i> impossible for a reader to read a partially updated value.
</I>&gt;<i>
</I>&gt;<i> That sounds like a good way to go to me.  Can you think of any reason
</I>&gt;<i> two slots would not be enough?  Also I'd feel better about the atomic
</I>&gt;<i> handling of th index with it manipulated as the native word size
</I>&gt;<i> (currently 32 or 64, could set aside 128 bits).  At least on some RISC
</I>&gt;<i> platforms, byte access is handled by the compiler as a native word
</I>&gt;<i> size plus extra instructions, killing atomicity I believe.
</I>
Are there locking operations available as part of the shared memory
interface that will be used?  It would seem that in general the use of
shared memory requires locking, absent particular circumstances where
one can argue that it's not needed.  I think it's best not to assume
anything about particular CPU architectures.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/gpsd-dev/attachments/20110320/f3d5c8cf/attachment.pgp">https://lists.berlios.de/pipermail/gpsd-dev/attachments/20110320/f3d5c8cf/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008890.html">[Gpsd-dev] [ntp:hackers]  ntpd shm changes
</A></li>
	<LI>Next message: <A HREF="008902.html">[Gpsd-dev] [ntp:hackers] ntpd shm changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8901">[ date ]</a>
              <a href="thread.html#8901">[ thread ]</a>
              <a href="subject.html#8901">[ subject ]</a>
              <a href="author.html#8901">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
