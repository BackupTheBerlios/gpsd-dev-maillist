<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] Single-writer/many-reader consistency
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Single-writer/many-reader%20consistency&In-Reply-To=%3CAANLkTi%3DjZpeUROPw4UY_RcxNgScjjAeoWF3mD_mr%2BO46%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009129.html">
   <LINK REL="Next"  HREF="009108.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] Single-writer/many-reader consistency</H1>
    <B>Dave Hart</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Single-writer/many-reader%20consistency&In-Reply-To=%3CAANLkTi%3DjZpeUROPw4UY_RcxNgScjjAeoWF3mD_mr%2BO46%40mail.gmail.com%3E"
       TITLE="[Gpsd-dev] Single-writer/many-reader consistency">davehart at gmail.com
       </A><BR>
    <I>Sat Mar 26 17:33:36 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="009129.html">[Gpsd-dev] Single-writer/many-reader consistency
</A></li>
        <LI>Next message: <A HREF="009108.html">[Gpsd-dev] Single-writer/many-reader consistency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9098">[ date ]</a>
              <a href="thread.html#9098">[ thread ]</a>
              <a href="subject.html#9098">[ subject ]</a>
              <a href="author.html#9098">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Mar 26, 2011 at 14:58 UTC, Terje Mathisen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">terje at tmsw.no</A>&gt; wrote:
&gt;<i> I suggest we extend the buffer size to 4 entries, making the entire block
</I>&gt;<i> 120 bytes, since this will fit inside the same two 64-byte cache lines as
</I>&gt;<i> the current layout needs.
</I>
For refclock_shm's shared memory, I am increasingly fond of Terje's
array of four timestamps and lock-free sequence number/index.  In that
context it seems to me even without memory barriers being emitted on
an architecture where they are in theory needed, ring buffering will
make it practically impossible to get an inconsistent set of
timestamps.

&gt;<i> The final 8 bytes (to make the total 128) is where I want to locate an
</I>&gt;<i> endian-detecting marker: &quot;GPSD-NTP&quot;:
</I>
Are you thinking of an architecture that allows for per-procecess
endian selection, or what purpose do you have in mind?  Call it a
magic number and I like the idea of sanity checking we're looking at
what we think we're looking at...

Cheers,
Dave Hart

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009129.html">[Gpsd-dev] Single-writer/many-reader consistency
</A></li>
	<LI>Next message: <A HREF="009108.html">[Gpsd-dev] Single-writer/many-reader consistency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9098">[ date ]</a>
              <a href="thread.html#9098">[ thread ]</a>
              <a href="subject.html#9098">[ subject ]</a>
              <a href="author.html#9098">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
