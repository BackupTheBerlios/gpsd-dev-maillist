<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] oncore pps delay
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20oncore%20pps%20delay&In-Reply-To=%3Calpine.DEB.1.10.0912072353160.12602%40org-pc51.fy.chalmers.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007268.html">
   <LINK REL="Next"  HREF="007270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] oncore pps delay</H1>
    <B>H&#229;kan Johansson</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20oncore%20pps%20delay&In-Reply-To=%3Calpine.DEB.1.10.0912072353160.12602%40org-pc51.fy.chalmers.se%3E"
       TITLE="[Gpsd-dev] oncore pps delay">f96hajo at chalmers.se
       </A><BR>
    <I>Tue Dec  8 00:05:58 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="007268.html">[Gpsd-dev] [Greg Troxel] CVS commit: pkgsrc/geography/gpsd
</A></li>
        <LI>Next message: <A HREF="007270.html">[Gpsd-dev] oncore pps delay
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7269">[ date ]</a>
              <a href="thread.html#7269">[ thread ]</a>
              <a href="subject.html#7269">[ subject ]</a>
              <a href="author.html#7269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
The attached patch adds support for the oncore driver to poll the Ay 
message (PPS delay), and to display its value with gpsmon.

The PPS delay is useful when running several devices with PPS output on 
the same machine, to separate the marks.

It also changes the serial ntpshm_put delay constant from .16 to .175 s 
for oncore as this seems to better reflect reality.  During testing, this 
was constant relative to the true turn of the second irrespective of the 
pps delay.

A variable pps_delay is added to the oncore part of gps_device_t, which 
later could be used to adjust the times reported with ntpshm_pps such that 
the need for manual adjustment of the ntpd or chronyd configurations could 
be avoided.  Some extra infrastructure in ntpchm.c, e.g. at ntpshm_put 
would be required.

Cheers,
H&#229;kan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: oncore_Ay_pps_delay.diff
Type: text/x-diff
Size: 5776 bytes
Desc: 
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/gpsd-dev/attachments/20091208/8276cbf5/attachment.diff">https://lists.berlios.de/pipermail/gpsd-dev/attachments/20091208/8276cbf5/attachment.diff</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007268.html">[Gpsd-dev] [Greg Troxel] CVS commit: pkgsrc/geography/gpsd
</A></li>
	<LI>Next message: <A HREF="007270.html">[Gpsd-dev] oncore pps delay
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7269">[ date ]</a>
              <a href="thread.html#7269">[ thread ]</a>
              <a href="subject.html#7269">[ subject ]</a>
              <a href="author.html#7269">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
