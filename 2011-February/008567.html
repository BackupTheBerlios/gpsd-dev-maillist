<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] gpsd/ntp combination....
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2011-February/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20gpsd/ntp%20combination....&In-Reply-To=%3CAANLkTik2ZMs9uwGZcw%2BHEGMDqWhy57wQjmamFTv0zHgD%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008566.html">
   <LINK REL="Next"  HREF="008568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] gpsd/ntp combination....</H1>
    <B>Who what?</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20gpsd/ntp%20combination....&In-Reply-To=%3CAANLkTik2ZMs9uwGZcw%2BHEGMDqWhy57wQjmamFTv0zHgD%40mail.gmail.com%3E"
       TITLE="[Gpsd-dev] gpsd/ntp combination....">chandleg at gmail.com
       </A><BR>
    <I>Tue Feb 22 06:20:30 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="008566.html">[Gpsd-dev] new gps report
</A></li>
        <LI>Next message: <A HREF="008568.html">[Gpsd-dev] gpsd/ntp combination....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8567">[ date ]</a>
              <a href="thread.html#8567">[ thread ]</a>
              <a href="subject.html#8567">[ subject ]</a>
              <a href="author.html#8567">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I compiled a working gpsd on Ubuntu 10.10 x86, but my compiles on
Slackware 13.1 x86 don't seem to be working with ntpd.
I am using the exact same hardware {swapped a hard disk} and the same GPS unit.

gpsd seems to be working fine, minicom and gpspipe work fine when
using /dev/ttyS0.  xgps also seems to be pulling the data and working
well.

The output of ntp, looks like this, and keeps scrolling with the lines
at the bottom:
<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">root at reference</A>:/usr/src/gpsd# ntpd -D 1 -c /etc/ntp.conf
ntpd <A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">4.2.6p1 at 1.2158-o</A> Sat Apr 24 19:01:14 UTC 2010 (1)
addto_syslog: proto: precision = 0.840 usec
event at 0 0.0.0.0 c01d 0d kern kernel time sync enabled
Finished Parsing!!
addto_syslog: ntp_io: estimated max descriptors: 1024, initial socket
boundary: 16
addto_syslog: Listen and drop on 0 v4wildcard 0.0.0.0 UDP 123
addto_syslog: Listen and drop on 1 v6wildcard :: UDP 123
addto_syslog: Listen normally on 2 lo 127.0.0.1 UDP 123
restrict: addr 7f000001 mask ffffffff mflags 00003000 flags 00000001
addto_syslog: Listen normally on 3 eth0 71.216.230.11 UDP 123
restrict: addr 47d8e60b mask ffffffff mflags 00003000 flags 00000001
addto_syslog: Listen normally on 4 lo ::1 UDP 123
addto_syslog: Listen normally on 5 eth0 fe80::230:48ff:fedf:6746 UDP 123
restrict: addr 00000000 mask ffffffff mflags 00000000 flags 000005d0
restrict: addr 7f000001 mask ffffffff mflags 00000000 flags 00000000
key_expire: at 0 associd 31524
peer_clear: at 0 next 1 associd 31524 refid INIT
event at 0 SHM(0) 8011 81 mobilize assoc 31524
newpeer: 127.0.0.1-&gt;127.127.28.0 mode 3 vers 4 poll 4 4 flags 0x9 0x1
ttl 0 key 00000000
key_expire: at 0 associd 31525
peer_clear: at 0 next 2 associd 31525 refid INIT
event at 0 SHM(1) 8011 81 mobilize assoc 31525
newpeer: 127.0.0.1-&gt;127.127.28.1 mode 3 vers 4 poll 4 4 flags 0x29 0x1
ttl 0 key 00000000
event at 0 0.0.0.0 c016 06 restart
event at 0 0.0.0.0 c012 02 freq_set kernel 0.000 PPM
event at 0 0.0.0.0 c011 01 freq_not_set
event at 1 SHM(0) 802b 8b clock_event clk_no_reply
event at 1 SHM(1) 802b 8b clock_event clk_no_reply
refclock_transmit: at 1 127.127.28.0
auth_agekeys: at 1 keys 1 expired 0
event at 2 SHM(0) 801b 8b clock_event clk_bad_time
refclock_transmit: at 2 127.127.28.1
event at 3 SHM(0) 801b 8b clock_event clk_no_reply
event at 4 SHM(0) 801b 8b clock_event clk_bad_time
event at 5 SHM(0) 801b 8b clock_event clk_no_reply
event at 6 SHM(0) 801b 8b clock_event clk_bad_time
event at 7 SHM(0) 801b 8b clock_event clk_no_reply
event at 8 SHM(0) 801b 8b clock_event clk_bad_time
event at 9 SHM(0) 801b 8b clock_event clk_no_reply
event at 10 SHM(0) 801b 8b clock_event clk_bad_time
event at 11 SHM(0) 801b 8b clock_event clk_no_reply
event at 12 SHM(0) 801b 8b clock_event clk_bad_time
event at 13 SHM(0) 801b 8b clock_event clk_no_reply
event at 14 SHM(0) 801b 8b clock_event clk_bad_time
event at 15 SHM(0) 801b 8b clock_event clk_no_reply
event at 16 SHM(0) 801b 8b clock_event clk_bad_time
^Caddto_syslog: ntpd exiting on signal 2


The values below never change:
<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">root at reference</A>:~# ntpq -p
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
 SHM(0)          .GPS.            0 l    -   16    0    0.000    0.000   0.000
 SHM(1)          .GPS1.           0 l    -   16    0    0.000    0.000   0.000


On the Ubuntu box after a minute or two I get a stable prefered clock..
Can anyone give me a suggestion of what I am doing wrong on this box,
or a library that might be causing this?
Both are 2.96~dev pulled from the git repo..

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008566.html">[Gpsd-dev] new gps report
</A></li>
	<LI>Next message: <A HREF="008568.html">[Gpsd-dev] gpsd/ntp combination....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8567">[ date ]</a>
              <a href="thread.html#8567">[ thread ]</a>
              <a href="subject.html#8567">[ subject ]</a>
              <a href="author.html#8567">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
