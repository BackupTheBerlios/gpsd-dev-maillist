<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] Segfault with Garmin GPS 18 USB
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2006-December/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Segfault%20with%20Garmin%20GPS%2018%20USB&In-Reply-To=%3C432beae0612282333r337b0764i28d610d35b15bce5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005481.html">
   <LINK REL="Next"  HREF="005484.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] Segfault with Garmin GPS 18 USB</H1>
    <B>Justin Patrin</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Segfault%20with%20Garmin%20GPS%2018%20USB&In-Reply-To=%3C432beae0612282333r337b0764i28d610d35b15bce5%40mail.gmail.com%3E"
       TITLE="[Gpsd-dev] Segfault with Garmin GPS 18 USB">papercrane at gmail.com
       </A><BR>
    <I>Fri Dec 29 08:33:48 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="005481.html">[Gpsd-dev] Segfault with Garmin GPS 18 USB
</A></li>
        <LI>Next message: <A HREF="005484.html">[Gpsd-dev] Segfault with Garmin GPS 18 USB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5483">[ date ]</a>
              <a href="thread.html#5483">[ thread ]</a>
              <a href="subject.html#5483">[ subject ]</a>
              <a href="author.html#5483">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/28/06, Gary E. Miller &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gem at rellim.com</A>&gt; wrote:
&gt;<i> Yo Justin!
</I>
Yo! Thanks for the response, I appreciate it.

&gt;<i>
</I>&gt;<i> On Thu, 28 Dec 2006, Justin Patrin wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; The unit itself works fine in Windows but
</I>&gt;<i> &gt; &gt; when I try to use it with gpsd (I've tried 2.28, 2.33, and svn as of
</I>&gt;<i> &gt; &gt; 2006-12-27) gpsd will segfault.
</I>&gt;<i>
</I>&gt;<i> 2.34 is the latest release version. The garmin serial was changed seriously
</I>&gt;<i> from 2.33 to 2.34, so do not bother with versions before 2.34.  I have not
</I>&gt;<i> tested the current SVN for gpsd.
</I>&gt;<i>
</I>&gt;<i> 2.34 works fine on my GPS 18/USB and that is what you should try first.
</I>&gt;<i>
</I>&gt;<i> My 18/USB is not close at hand, but I just tried SVN head on my 18/LVC
</I>&gt;<i> in garmin binary mode and that works.
</I>
Ok, I'm building it right now. However, I don't think it will help as
I've used current SVN and it had the same problem.

&gt;<i>
</I>&gt;<i> &gt; A little debugging shows that it's segfauling because the latitude and
</I>&gt;<i> &gt; longitude are so high/low that when it tries to get the values out of
</I>&gt;<i> &gt; the array in wgs84_separation() it tried for incorrect indexes.
</I>&gt;<i>
</I>&gt;<i> Not really the fault if wgs84_separation().  Looks like it is being
</I>&gt;<i> passed a huge value for Lat/Lon.
</I>&gt;<i>
</I>
Yep, this is what I figured it was.

&gt;<i> Change to 2.34, up the debug level a bit more, and send me the logs.
</I>&gt;<i>
</I>
What is an appropriate debug level?

&gt;<i> We have seen problems similar to this with bad floating point in the
</I>&gt;<i> compiler.  What kernel, gcc, glibc are you using?
</I>&gt;<i>
</I>
I just tested using the latest Knoppix CD on my laptop and it worked
fine. Unfortunately it's being very finicky so I can't get back in to
check that version of gpsd and such it is running, however something I
neglected to mention is that the problems I'm seeing are on my Sharp
Zaurus running OpenZaurus 3.5.4.2(+). It's an ARM processor and
everything is built using softfloat as it's much faster on these
machines. I'm figuring that one of those is the problem.

The build environment is using gcc 3.4.4.
glibc 2.3.5
kernel is linux-openzaurus-2.6.17 (2.6.17 + some patches for better
zaurus support, our kernel dev works hard to get most of it into
mainline, though)

I'm going to start a build without softfloat and see if that makes a
difference. If you have any other ideas please let me know.

-- 
Justin Patrin

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005481.html">[Gpsd-dev] Segfault with Garmin GPS 18 USB
</A></li>
	<LI>Next message: <A HREF="005484.html">[Gpsd-dev] Segfault with Garmin GPS 18 USB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5483">[ date ]</a>
              <a href="thread.html#5483">[ thread ]</a>
              <a href="subject.html#5483">[ subject ]</a>
              <a href="author.html#5483">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
