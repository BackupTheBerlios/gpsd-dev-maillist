<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] [Gpsd-commit-watch] Project gpsd at BerliOS branch, master, updated. release-2.95-453-g0a76bcc
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2011-January/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20%5BGpsd-commit-watch%5D%20Project%20gpsd%20at%20BerliOS%20branch%2C%0A%20master%2C%20updated.%20release-2.95-453-g0a76bcc&In-Reply-To=%3C4D24919B.3030603%40ewanet.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008439.html">
   <LINK REL="Next"  HREF="008442.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] [Gpsd-commit-watch] Project gpsd at BerliOS branch, master, updated. release-2.95-453-g0a76bcc</H1>
    <B>Beat Bolli</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20%5BGpsd-commit-watch%5D%20Project%20gpsd%20at%20BerliOS%20branch%2C%0A%20master%2C%20updated.%20release-2.95-453-g0a76bcc&In-Reply-To=%3C4D24919B.3030603%40ewanet.ch%3E"
       TITLE="[Gpsd-dev] [Gpsd-commit-watch] Project gpsd at BerliOS branch, master, updated. release-2.95-453-g0a76bcc">bbolli at ewanet.ch
       </A><BR>
    <I>Wed Jan  5 16:43:23 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="008439.html">[Gpsd-dev] [Gpsd-commit-watch] Project gpsd at BerliOS branch, master, updated. release-2.95-453-g0a76bcc
</A></li>
        <LI>Next message: <A HREF="008442.html">[Gpsd-dev] [Gpsd-commit-watch] Project gpsd at BerliOS branch, master, updated. release-2.95-453-g0a76bcc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8440">[ date ]</a>
              <a href="thread.html#8440">[ thread ]</a>
              <a href="subject.html#8440">[ subject ]</a>
              <a href="author.html#8440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05.01.2011 16:33, Michael Cook wrote:
&gt;<i> On 1/5/2011 10:17 AM, esr at BerliOS wrote:
</I>&gt;&gt;<i> +    while (read(context-&gt;dsock, buf, sizeof(buf) - 1) == -1) {
</I>&gt;&gt;<i> +	if (errno == EINTR || errno == EAGAIN)
</I>&gt;&gt;<i> +	    continue;
</I>&gt;&gt;<i> +	gpsd_report(LOG_ERROR, &quot;ntrip stream read error %d on fd %d\n&quot;, errno,
</I>&gt;&gt;<i> +		    context-&gt;dsock);
</I>&gt;&gt;<i>  	goto close;
</I>&gt;<i> 
</I>&gt;<i> If read() ever did result in EAGAIN, this would turn into a busy/poll
</I>&gt;<i> loop, repeatedly calling read() as fast as possible until data is ready.
</I>&gt;<i> That could be bad, no?
</I>
Possibly, but this code is ran only in the connection phase, so the
impact is minimal.

It might be better to switch the socket to nonblocking after the initial
phase, but that change would be a lot more invasive.

Beat
-- 
mail: echo '&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">bNbolOli at ewaSPnetAM.ch</A>&gt;' | tr -d '[A-S]'
pgp: 0x506A903A; 49D5 794A EA77 F907 764F  D89E 304B 93CF 506A 903A
gsm: 4.7.7.6.0.7.7.9.7.1.4.e164.arpa
icbm: 47.0452 N, 7.2715 E
http: www.drbeat.li

&quot;It takes love over gold, and mind over matter&quot; -- Dire Straits

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 260 bytes
Desc: OpenPGP digital signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/gpsd-dev/attachments/20110105/f4f873f0/attachment.pgp">https://lists.berlios.de/pipermail/gpsd-dev/attachments/20110105/f4f873f0/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008439.html">[Gpsd-dev] [Gpsd-commit-watch] Project gpsd at BerliOS branch, master, updated. release-2.95-453-g0a76bcc
</A></li>
	<LI>Next message: <A HREF="008442.html">[Gpsd-dev] [Gpsd-commit-watch] Project gpsd at BerliOS branch, master, updated. release-2.95-453-g0a76bcc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8440">[ date ]</a>
              <a href="thread.html#8440">[ thread ]</a>
              <a href="subject.html#8440">[ subject ]</a>
              <a href="author.html#8440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
