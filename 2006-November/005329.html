<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] Data in trunk/test/trimble-lassen_iq-3dfix.log doesn't	look right
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2006-November/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Data%20in%20trunk/test/trimble-lassen_iq-3dfix.log%20doesn%27t%0A%09look%20right&In-Reply-To=%3C20061129104306.GA3287%40thyrsus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005328.html">
   <LINK REL="Next"  HREF="005330.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] Data in trunk/test/trimble-lassen_iq-3dfix.log doesn't	look right</H1>
    <B>Eric S. Raymond</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Data%20in%20trunk/test/trimble-lassen_iq-3dfix.log%20doesn%27t%0A%09look%20right&In-Reply-To=%3C20061129104306.GA3287%40thyrsus.com%3E"
       TITLE="[Gpsd-dev] Data in trunk/test/trimble-lassen_iq-3dfix.log doesn't	look right">esr at thyrsus.com
       </A><BR>
    <I>Wed Nov 29 11:43:06 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="005328.html">[Gpsd-dev] bug or self-indulgent refactoring?
</A></li>
        <LI>Next message: <A HREF="005330.html">[Gpsd-dev] Data in trunk/test/trimble-lassen_iq-3dfix.log	doesn't look right
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5329">[ date ]</a>
              <a href="thread.html#5329">[ thread ]</a>
              <a href="subject.html#5329">[ subject ]</a>
              <a href="author.html#5329">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This one's for Chris.

I've checked in changes to gpsfake.py that allow it to gather TSIP packets
from a test load.   Look at this:

Script started on Wed 29 Nov 2006 05:27:39 AM EST
script:<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">esr at snark</A>:~/svn/gpsd/trunk$ gpsfake -D 5 -1 -p test/trimble-lassen_iq-3df ix.log
gpsd: control socket opened at /tmp/gpsfake-3330.sock
gpsd: launching (Version 2.34)
gpsd: listening on port 12000
gpsd: Unable to start ntpshm.  gpsd must run as root.
gpsd: running with effective group ID 23
gpsd: running with effective user ID 23
gpsd: control socket connect on 5
gpsd: &lt;= control(5): +/dev/pts/4\x0d

gpsd: &lt;= control(5): adding /dev/pts/4 
gpsd: opening GPS data source at '/dev/pts/4'
gpsd: speed 4800, 8N1
gpsd: garmin_gps not active.
gpsd: no probe matched...
gpsd: gpsd_activate(0): opened GPS (6)
gpsd: client connect on 5
gpsd: checking client(0)
gpsd: &lt;= client(0): w+r+
gpsd: client(0): assigning channel...
gpsd: User requires 2, channel type is -1
gpsd: client(0): channel 6 already active.
gpsd: client(0): channel 6 already active.
gpsd: client(0) turned on raw mode
gpsd: =&gt; client(0): GPSD,W=1,R=1
GPSD,X=1164796067.042404,I=unknown,
GPSD,W=1,R=1
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type -1
gpsd: Garmin checksum failed: 1d!=0
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type -1
gpsd: packet sniff finds type 3
gpsd: switch_driver(Trimble TSIP) called...
gpsd: selecting Trimble TSIP driver...
gpsd: TSIP packet id 0x6d length 22: 54403b7ceb3fb6bc124023b7ef3fbbd92e121609130b
gpsd: Sat info: mode 3, satellites used 5:  18 22 9 19 11
gpsd: Sat info: DOP P=2.9 H=1.4 V=2.6 T=1.5 G=3.3
gpsd: Sent TSIP packet id 0x21: 
gpsd: Sent TSIP packet id 0x3c: 00
gpsd: Sent TSIP packet id 0x26: 
gpsd: &lt;= GPS: $GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30
gpsd: =&gt; client(0): $GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30
gpsd: client(0): channel 6 already active.
gpsd: GPS is confused about whether it has a fix (status=0, mode=3).
gpsd: =&gt; client(0): GPSD,O=?
$GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30
GPSD,O=?
gpsd: Garmin checksum failed: 46!=0
gpsd: Sent TSIP packet id 0x1f: 
gpsd: Sent TSIP packet id 0x21: 
gpsd: Sent TSIP packet id 0x28: 
gpsd: Sent TSIP packet id 0x8e: 15
gpsd: Sent TSIP packet id 0xbb: 03
gpsd: TSIP packet id 0x6d length 22: 54403b7ceb3fb6bc124023b7ef3fbbd92e121609130b
gpsd: Sat info: mode 3, satellites used 5:  18 22 9 19 11
gpsd: Sat info: DOP P=2.9 H=1.4 V=2.6 T=1.5 G=3.3
gpsd: &lt;= GPS: $GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: =&gt; client(0): $GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: client(0): channel 6 already active.
gpsd: GPS is confused about whether it has a fix (status=0, mode=3).
gpsd: =&gt; client(0): GPSD,O=?
$GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30
$PGRME,0.00,M,0.00,M,11.29,M*25
GPSD,O=?
gpsd: TSIP packet id 0x6d length 22: 54403b69173fb6abde4023a5c03fbbbd54121609130b
gpsd: Sat info: mode 3, satellites used 5:  18 22 9 19 11
gpsd: Sat info: DOP P=2.9 H=1.4 V=2.6 T=1.5 G=3.3
gpsd: &lt;= GPS: $GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: =&gt; client(0): $GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: client(0): channel 6 already active.
gpsd: GPS is confused about whether it has a fix (status=0, mode=3).
gpsd: =&gt; client(0): GPSD,O=?
$GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30
$PGRME,0.00,M,0.00,M,11.29,M*25
GPSD,O=?
gpsd: TSIP packet id 0x6d length 22: 54403b72793fb6aa294023b0f83fbbc5fd121609130b
gpsd: Sat info: mode 3, satellites used 5:  18 22 9 19 11
gpsd: Sat info: DOP P=2.9 H=1.4 V=2.6 T=1.5 G=3.3
gpsd: &lt;= GPS: $GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: =&gt; client(0): $GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: client(0): channel 6 already active.
gpsd: GPS is confused about whether it has a fix (status=0, mode=3).
gpsd: =&gt; client(0): GPSD,O=?
$GPGSA,A,3,18,22,09,19,11,,,,,,,,2.9,1.4,2.6*30
$PGRME,0.00,M,0.00,M,11.29,M*25
GPSD,O=?
gpsd: Garmin checksum failed: 8a!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: TSIP packet id 0x6d length 22: 544043db653fe0532940208f653fb0798e1216091301
gpsd: Sat info: mode 3, satellites used 5:  18 22 9 19 1
gpsd: Sat info: DOP P=3.1 H=1.8 V=2.5 T=1.4 G=3.4
gpsd: &lt;= GPS: $GPGSA,A,3,18,22,09,19,01,,,,,,,,3.1,1.8,2.5*37\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: =&gt; client(0): $GPGSA,A,3,18,22,09,19,01,,,,,,,,3.1,1.8,2.5*37\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: client(0): channel 6 already active.
gpsd: GPS is confused about whether it has a fix (status=0, mode=3).
gpsd: =&gt; client(0): GPSD,O=?
$GPGSA,A,3,18,22,09,19,01,,,,,,,,3.1,1.8,2.5*37
$PGRME,0.00,M,0.00,M,11.29,M*25
GPSD,O=?
gpsd: TSIP packet id 0x6d length 22: 544043db653fe0532940208f653fb0798e1216091301
gpsd: Sat info: mode 3, satellites used 5:  18 22 9 19 1
gpsd: Sat info: DOP P=3.1 H=1.8 V=2.5 T=1.4 G=3.4
gpsd: &lt;= GPS: $GPGSA,A,3,18,22,09,19,01,,,,,,,,3.1,1.8,2.5*37\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: =&gt; client(0): $GPGSA,A,3,18,22,09,19,01,,,,,,,,3.1,1.8,2.5*37\x0d\x0a$PGRME,0.00,M,0.00,M,11.29,M*25
gpsd: client(0): channel 6 already active.
gpsd: GPS is confused about whether it has a fix (status=0, mode=3).
gpsd: =&gt; client(0): GPSD,O=?
$GPGSA,A,3,18,22,09,19,01,,,,,,,,3.1,1.8,2.5*37
$PGRME,0.00,M,0.00,M,11.29,M*25
GPSD,O=?
gpsd: Garmin checksum failed: 9f!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: Garmin checksum failed: dd!=0
gpsd: Garmin checksum failed: b4!=0
gpsd: Garmin checksum failed: a6!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: Garmin checksum failed: ad!=0
gpsd: Garmin checksum failed: 79!=0
gpsd: Garmin checksum failed: 73!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: Garmin checksum failed: 7c!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: Garmin checksum failed: 42!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: TSIP packet id 0x82 length 1: 02
gpsd: DGPS mode 2
gpsd: Sent TSIP packet id 0x21: 
gpsd: Sent TSIP packet id 0x24: 
gpsd: Sent TSIP packet id 0x3c: 00
gpsd: Sent TSIP packet id 0x26: 
gpsd: Garmin checksum failed: 27!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: Garmin checksum failed: 3a!=0
gpsd: TSIP packet id 0x82 length 1: 02
gpsd: DGPS mode 2
gpsd: Garmin checksum failed: e5!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: TSIP packet id 0x82 length 1: 02
gpsd: DGPS mode 2
gpsd: Garmin checksum failed: d6!=0
gpsd: TSIP packet id 0x82 length 1: 02
gpsd: DGPS mode 2
gpsd: Garmin checksum failed: 46!=0
gpsd: Garmin checksum failed: 46!=0
gpsd: Garmin checksum failed: d6!=0
gpsd: TSIP packet id 0x82 length 1: 02
gpsd: DGPS mode 2
gpsd: Sent TSIP packet id 0x3c: 00
gpsd: Garmin checksum failed: 70!=0
gpsd: speed 4800, 8N1
gpsd: closing GPS=/dev/pts/4 (6)
gpsd: Received terminating signal 15. Exiting...
script:<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">esr at snark</A>:~/svn/gpsd/trunk$ exit

Script done on Wed 29 Nov 2006 05:28:48 AM EST

Now, on the one hand, that does look like gpsd is seeing the correct sequence
of packets.  The packet sniffer achieves lock and correctly selects the
TSIP driver.  After that we see no messages suggesting an invalid packet
fragment (discounting the spurious Garmin-checksum ones).

On the other hand, all the daemon is extracting is the equivalent of GSAs,  Are
you sure there is actual fix data in there?
-- 
		&lt;a href=&quot;<A HREF="http://www.catb.org/~esr/">http://www.catb.org/~esr/</A>&quot;&gt;Eric S. Raymond&lt;/a&gt;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005328.html">[Gpsd-dev] bug or self-indulgent refactoring?
</A></li>
	<LI>Next message: <A HREF="005330.html">[Gpsd-dev] Data in trunk/test/trimble-lassen_iq-3dfix.log	doesn't look right
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5329">[ date ]</a>
              <a href="thread.html#5329">[ thread ]</a>
              <a href="subject.html#5329">[ subject ]</a>
              <a href="author.html#5329">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
