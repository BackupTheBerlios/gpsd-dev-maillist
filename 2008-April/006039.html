<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] gpsd - garmin driver broken due to use of /proc/bus/usb
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20gpsd%20-%20garmin%20driver%20broken%20due%20to%20use%20of%0A%20/proc/bus/usb&In-Reply-To=%3Calpine.LNX.1.00.0804011632500.29555%40catbert.rellim.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006038.html">
   <LINK REL="Next"  HREF="006040.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] gpsd - garmin driver broken due to use of /proc/bus/usb</H1>
    <B>Gary E. Miller</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20gpsd%20-%20garmin%20driver%20broken%20due%20to%20use%20of%0A%20/proc/bus/usb&In-Reply-To=%3Calpine.LNX.1.00.0804011632500.29555%40catbert.rellim.com%3E"
       TITLE="[Gpsd-dev] gpsd - garmin driver broken due to use of /proc/bus/usb">gem at rellim.com
       </A><BR>
    <I>Wed Apr  2 01:45:30 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="006038.html">[Gpsd-dev] gpsd - garmin driver broken due to use of	/proc/bus/usb
</A></li>
        <LI>Next message: <A HREF="006040.html">[Gpsd-dev] gpsd - garmin driver broken due to use of	/proc/bus/usb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6039">[ date ]</a>
              <a href="thread.html#6039">[ thread ]</a>
              <a href="subject.html#6039">[ subject ]</a>
              <a href="author.html#6039">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Yo Bernd!

On Wed, 2 Apr 2008, Bernd Zeimetz wrote:

&gt;<i> 1. You can always use auto* (aka configure and friends) to configure at
</I>&gt;<i> build time to use of libusb or not - that's what configure was made for.
</I>&gt;<i> Add something like --with-libusb, and if it's not enabled stick with /proc.
</I>
Then what does --with-libusb buy anyone?  It only makes sense to use
libusb if someone recodes the Garmin USB kernel using libusb and that is
not going to be a small job.

&gt;<i> 2. Not sure where you got the 60k from, libusb on openwrt is about 27k
</I>&gt;<i> for example.
</I>
That is how big my Gentoo libsysfs is.  My libusb is 44k.

&gt;<i> 3. As I said before - you can't rely on an existing /sys - even the line
</I>&gt;<i> you have in there now should be removed imho, there're better/other ways
</I>&gt;<i> to check that. Even worse, the sysfs filenames may change between Kernel
</I>&gt;<i> versions, you're supposed to use libsysfs because of that reason. And
</I>&gt;<i> don't forget that /sys does not exist on 2.4 kernels, which are still
</I>&gt;<i> used on a lot of embedded devices. So where's the sense in using it? If
</I>&gt;<i> you want to stick with a hack to save embedded devices from an extra
</I>&gt;<i> library, use /proc.
</I>
Then you come back to where I was, which was to leave it as it is.

&gt;<i> &gt;  If you wanted to
</I>&gt;<i> &gt; code up a Garmin driver using libusb then I could see that getting
</I>&gt;<i> &gt; accepted in the trunk.
</I>&gt;<i>
</I>&gt;<i> You're not seriously asking me to fork the driver?
</I>
Huh?  No way, that is the worst of all worlds.  Never thought it.
Never suggested it.

&gt;<i> See it this way: Garmin USB support IS broken on Ubuntu and (if I
</I>&gt;<i> remember right) Fedora, chances are good it will be broken in Debian's
</I>&gt;<i> Lenny, and more distributions will follow.
</I>
First I have heard about that.  Have they dropped /proc support already?
If so I can imagine a ton of stuff got broken by that.  That would be
a good argument to find an alternative to see if the Garmin USB module
is loaded.

&gt;<i>  So I'll either remove your
</I>&gt;<i> Garmin USB driver in Debian (because it's useless), or I'll patch it to
</I>&gt;<i> use libusb. That pretty much depends on my mood, spare time and if I
</I>&gt;<i> find access to a Garmin USB GPSr for a long enough time.
</I>
Now we are back on the same page, we both want it changed, and neither
feels the work to do so is justified.  The Garmins are old and just not
as good or cheap as many newer GPS units.  Anyone taking the time to
update their distro can also spend the $50 to get a good GPS.

If you do come up with some patches let me know and I can test them and
get the code in the trunk.

RGDS
GARY
- ---------------------------------------------------------------------------
Gary E. Miller Rellim 109 NW Wilmington Ave., Suite E, Bend, OR 97701
	<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gem at rellim.com</A>  Tel:+1(541)382-8588

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (GNU/Linux)

iD8DBQFH8skd8KZibdeR3qURAtLMAKDUi5IGc+yzOmpQocxHFOsjoJboFACeJ2Zn
opjHc0h5dRrRipAqApOhQDI=
=BXEq
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006038.html">[Gpsd-dev] gpsd - garmin driver broken due to use of	/proc/bus/usb
</A></li>
	<LI>Next message: <A HREF="006040.html">[Gpsd-dev] gpsd - garmin driver broken due to use of	/proc/bus/usb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6039">[ date ]</a>
              <a href="thread.html#6039">[ thread ]</a>
              <a href="subject.html#6039">[ subject ]</a>
              <a href="author.html#6039">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
