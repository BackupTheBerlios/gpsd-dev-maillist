<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] Re: Trial reconnect support committed -- please test
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2005-January/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Re%3A%20Trial%20reconnect%20support%20committed%20--%20please%20test&In-Reply-To=%3C20050116065609.GA11531%40thyrsus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000546.html">
   <LINK REL="Next"  HREF="000551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] Re: Trial reconnect support committed -- please test</H1>
    <B>Eric S. Raymond</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20Re%3A%20Trial%20reconnect%20support%20committed%20--%20please%20test&In-Reply-To=%3C20050116065609.GA11531%40thyrsus.com%3E"
       TITLE="[Gpsd-dev] Re: Trial reconnect support committed -- please test">esr at thyrsus.com
       </A><BR>
    <I>Sun Jan 16 07:56:09 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000546.html">[Gpsd-dev] Re: Trial reconnect support committed -- please test
</A></li>
        <LI>Next message: <A HREF="000551.html">[Gpsd-dev] Re: Trial reconnect support committed -- please test
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#550">[ date ]</a>
              <a href="thread.html#550">[ thread ]</a>
              <a href="subject.html#550">[ subject ]</a>
              <a href="author.html#550">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Petter Reinholdtsen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">pere at hungry.com</A>&gt;:
&gt;<i> Here is a draft patch doing this.
</I>&gt;<i> 
</I>&gt;<i>  - drop the auto-reconnect feature in libgps, and add a new
</I>&gt;<i>    gps_reconnect() instead (to make sure we keep the old GPS status
</I>&gt;<i>    info when reconnecting, if we don't care about this, we could use
</I>&gt;<i>    gps_close() and gps_open()).
</I>&gt;<i> 
</I>&gt;<i>  - Make sure xgps handle_input() and handle_time_out() call
</I>&gt;<i>    gps_reconnect() and register the new file descriptor with Xt when
</I>&gt;<i>    gps_poll() fail.
</I>&gt;<i> 
</I>&gt;<i>  - Fix typo, sending 'app' into the timeout handler, where it was
</I>&gt;<i>    unused.
</I>&gt;<i> 
</I>&gt;<i> An alternative is to add some 'last query' variable to gps_data_t, and
</I>&gt;<i> send this to the server on reconnects.
</I>
Let's slow down a bit, here.  I think we're letting out coding run ahead of 
our thinking.

I have backed out the reconnect changes, so we're at a known-good state.
Before we go hacking at the library internals any further, let's see if 
we can come up with clean logic to do reconnect at the application
level (that is, in this context, strictly within xgps.c).  

Maybe that will be worth refactoring into a new library function, maybe
not.  I don't have an opinion about that yet.
-- 
		&lt;a href=&quot;<A HREF="http://www.catb.org/~esr/">http://www.catb.org/~esr/</A>&quot;&gt;Eric S. Raymond&lt;/a&gt;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000546.html">[Gpsd-dev] Re: Trial reconnect support committed -- please test
</A></li>
	<LI>Next message: <A HREF="000551.html">[Gpsd-dev] Re: Trial reconnect support committed -- please test
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#550">[ date ]</a>
              <a href="thread.html#550">[ thread ]</a>
              <a href="subject.html#550">[ subject ]</a>
              <a href="author.html#550">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
