<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] linux pps support
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20linux%20pps%20support&In-Reply-To=%3Calpine.LNX.1.10.1007201037050.4924%40catbert.rellim.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008071.html">
   <LINK REL="Next"  HREF="008073.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] linux pps support</H1>
    <B>Gary E. Miller</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20linux%20pps%20support&In-Reply-To=%3Calpine.LNX.1.10.1007201037050.4924%40catbert.rellim.com%3E"
       TITLE="[Gpsd-dev] linux pps support">gem at rellim.com
       </A><BR>
    <I>Tue Jul 20 19:43:08 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008071.html">[Gpsd-dev] linux pps support
</A></li>
        <LI>Next message: <A HREF="008073.html">[Gpsd-dev] linux pps support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8072">[ date ]</a>
              <a href="thread.html#8072">[ thread ]</a>
              <a href="subject.html#8072">[ subject ]</a>
              <a href="author.html#8072">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Yo Greg!

On Tue, 20 Jul 2010, Greg Troxel wrote:

&gt;<i> OK, I undertand that (the kernel has support to grab a timeval on pps
</I>&gt;<i> rising edge, presumably on CTS or DCD.
</I>
Yep.  Good.

&gt;<i> What I don't understand is how that relates to gpsd.
</I>&gt;<i>
</I>&gt;<i>   I think gpsd doesn't set the system clock now.  Instead, it makes some
</I>&gt;<i>   measurements of offsets from system time and sends them via shm to ntp.
</I>
Yes.

&gt;<i>   ntp now has support for PPS.
</I>
Yes, BUT. ntpd does not have linux support and when ntpd has control of
the PPS then gpsd can not get to it.  So if you want PPS to work with
both gpsd and ntpd (or other ntp daemon like chrony) at the same time
then gpsd must do the work.

&gt;<i> So are you envisioning a world where
</I>&gt;<i>
</I>&gt;<i>   gpsd gets time from a GPS receiver, both NMEA for labeling seconds,
</I>&gt;<i>   and PPS.
</I>
gpsd has done that well for a while.

&gt;<i>   gpsd obtains kernel PPS measurements and uses those to drive the NTP
</I>&gt;<i>   SHM clock
</I>
gpsd has measured PPS well for a while, the new twist is just to use the
lower latency, and hopefully more accurate, kernel PPS.

The rumour is that should increase PPS stability by a factor of 10x.

&gt;<i>   ntpd just follows the gpsd-written SHM clock
</I>
As it does with current gpsd/ntpd config.

&gt;<i>   this is better than having ntpd do PPS itself, because this way one
</I>&gt;<i>   program is managing both the nmea/whatever and pps signal
</I>
Yes, and that program is gpsd.

RGDS
GARY
- ---------------------------------------------------------------------------
Gary E. Miller Rellim 109 NW Wilmington Ave., Suite E, Bend, OR 97701
	<A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">gem at rellim.com</A>  Tel:+1(541)382-8588

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (GNU/Linux)

iD8DBQFMReAvBmnRqz71OvMRAoN8AJ9m774S5b3Jszo/8oxgKb66ngloDwCgm0wk
uoE2+rDoYKKMnDtEZrB4lBg=
=38EX
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008071.html">[Gpsd-dev] linux pps support
</A></li>
	<LI>Next message: <A HREF="008073.html">[Gpsd-dev] linux pps support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8072">[ date ]</a>
              <a href="thread.html#8072">[ thread ]</a>
              <a href="subject.html#8072">[ subject ]</a>
              <a href="author.html#8072">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
