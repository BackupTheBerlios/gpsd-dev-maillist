<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gpsd-dev] linux pps support / NTPSHM update?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpsd-dev/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20linux%20pps%20support%20/%20NTPSHM%20update%3F&In-Reply-To=%3C20100722104030.GC3529%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008079.html">
   <LINK REL="Next"  HREF="008082.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gpsd-dev] linux pps support / NTPSHM update?</H1>
    <B>Miroslav Lichvar</B> 
    <A HREF="mailto:gpsd-dev%40lists.berlios.de?Subject=Re%3A%20%5BGpsd-dev%5D%20linux%20pps%20support%20/%20NTPSHM%20update%3F&In-Reply-To=%3C20100722104030.GC3529%40localhost%3E"
       TITLE="[Gpsd-dev] linux pps support / NTPSHM update?">mlichvar at redhat.com
       </A><BR>
    <I>Thu Jul 22 12:40:30 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008079.html">[Gpsd-dev] linux pps support / NTPSHM update?
</A></li>
        <LI>Next message: <A HREF="008082.html">[Gpsd-dev] linux pps support / NTPSHM update?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8081">[ date ]</a>
              <a href="thread.html#8081">[ thread ]</a>
              <a href="subject.html#8081">[ subject ]</a>
              <a href="author.html#8081">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jul 22, 2010 at 10:29:54AM +0200, <A HREF="https://lists.berlios.de/mailman/listinfo/gpsd-dev">f96hajo at chalmers.se</A> wrote:
&gt;<i> Regarding updating the NTPSHM structure, I thought about this quite
</I>&gt;<i> some while ago, but got stuck at the issue of how to make it
</I>&gt;<i> backwards compatible in the light of mixed 32/64-bit installations
</I>&gt;<i> discussed a while ago on the gpsd list.  Issue there is that an int
</I>&gt;<i> can be both 32 and 64 bits, thus even spoiling identifications by
</I>&gt;<i> the 'mode' member.
</I>
To make it compatible on 32/64bits will probably require an
incompatible change. If compatibility with current protocol should be
preserved, the easiest way to extend it for nanoseconds seems to be
allocating two ints from the dummy array, fill them with nanoseconds,
fill also the old fields with microseconds and the receiver would just
check if nsec / 1000 = usec and only then it would the nanosecond
fields.

-- 
Miroslav Lichvar

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008079.html">[Gpsd-dev] linux pps support / NTPSHM update?
</A></li>
	<LI>Next message: <A HREF="008082.html">[Gpsd-dev] linux pps support / NTPSHM update?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8081">[ date ]</a>
              <a href="thread.html#8081">[ thread ]</a>
              <a href="subject.html#8081">[ subject ]</a>
              <a href="author.html#8081">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpsd-dev">More information about the Gpsd-dev
mailing list</a><br>
</body></html>
